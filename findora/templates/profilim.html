{% load static %}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Profilim</title>
    <link rel="stylesheet" href="{% static 'css/profilim.css' %}">
    <!-- Bootstrap JS (Popper ile birlikte) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">



</head>
<body>
    <div class="container">
        <!-- SOL TARAF -->
        <div class="sidebar">
            <div class="go-back">
                <a href="{% url 'home' %}" class="back-button">â¬… Geri</a>
            </div>

            <div class="profile-card">
                {% if user.profile_photo %}
                    <img src="{{ user.profile_photo.url }}" alt="Profil FotoÄŸrafÄ±" class="profile-photo">
                {% else %}
                    <img src="{% static 'default_gorsel.png' %}" alt="VarsayÄ±lan Profil FotoÄŸrafÄ±" class="profile-photo">
                {% endif %}
                <h2>{{ user.username }}</h2>
                <p><strong>Ad Soyad:</strong> {{ user.full_name }} </p>
                <p><strong>DoÄŸum Tarihi:</strong> {{ user.birthdate }}</p>
            </div>

            <div class="account-settings">
                <h3>âš™ Hesap AyarlarÄ±</h3>
            <!-- Bilgilerimi GÃ¼ncelle Butonu -->
            <a href="#" data-bs-toggle="modal" data-bs-target="#updateProfileModal" class="account-action">
                <i class="fas fa-user-edit"></i> Bilgilerimi GÃ¼ncelle
            </a>

             <!-- Åifreyi DeÄŸiÅŸtir Butonu -->
             <a href="#" class="account-action">
                <i class="fas fa-key"></i> Åifreyi DeÄŸiÅŸtir
            </a> 

            <!-- Ã‡Ä±kÄ±ÅŸ Yap Butonu -->
            <a href="{% url 'logout' %}" class="account-action">
                <i class="fas fa-arrow-right-from-bracket"></i> Ã‡Ä±kÄ±ÅŸ Yap
            </a>
            <!-- HesabÄ± Sil Butonu -->
            <a href="#" class="account-action">
                     <i class="far fa-trash-can"></i> HesabÄ± Sil
            </a>
            
       
            </div>
        </div>

    
  

        <!-- SAÄ TARAF -->
        <div class="main-content">
            <div id="kayiplar" class="kayiplar-card">
                <h2>ğŸ’” Kaybettiklerim</h2>
                {% if kaybettiklerim %}
                    <ul class="esya-listesi">
                        {% for kayit in kaybettiklerim %}
                            <li class="esya-item">
                                <strong>{{ kayit.baslik }}</strong> <br>
                                <span>{{ kayit.konum }} - {{ kayit.tarih }}</span><br>
                                <p>AÃ§Ä±klama: {{ kayit.aciklama }}</p>
                                {% if kayit.resim %}
                                    <img src="{{ kayit.resim.url }}" width="150" />
                                {% endif %}
                                <br>
                                <a href="#">âœ DÃ¼zenle</a> |
                                <a href="#" onclick="return confirm('Silmek istediÄŸine emin misin aÅŸkÄ±m? ğŸ˜¢')">ğŸ—‘ Sil</a>
                            </li>
                            <hr>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>HenÃ¼z bildirdiÄŸiniz kayÄ±p eÅŸya yok ğŸ˜•</p>
                {% endif %}
            </div>

            <div id="buldugun" class="buldugun-card">
                <h2>ğŸ’– BulduklarÄ±m</h2>
                {% if bulduklarim %}
                    <ul class="esya-listesi">
                        {% for kayit in bulduklarim %}
                            <li class="esya-item">
                                <strong>{{ kayit.baslik }}</strong> <br>
                                <span>{{ kayit.konum }} - {{ kayit.tarih }}</span><br>
                                <p>AÃ§Ä±klama: {{ kayit.tanim }}</p>
                                {% if kayit.resim %}
                                    <img src="{{ kayit.resim.url }}" width="150" />
                                {% endif %}
                                <br>
                                <a href="#">âœ DÃ¼zenle</a> |
                                <a href="#" onclick="return confirm('Silmek istediÄŸine emin misin balÄ±m? ğŸ˜¢')">ğŸ—‘ Sil</a>
                            </li>
                            <hr>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>HenÃ¼z bulduÄŸunuz eÅŸya yok ğŸ˜•</p>
                {% endif %}
            </div>

            <h2>YaptÄ±ÄŸÄ±m Yorumlar</h2>
            <div class="yorum-container">
                {% for yorum in yorumlar %}
                    <div class="yorum-karti">
                        <div class="card-body">
                            <h5 class="card-title">{{ yorum.user.username }}</h5>
                            <p class="card-text">{{ yorum.yorum }}</p>
                            <footer class="blockquote-footer">{{ yorum.tarih }}</footer>
                        </div>
                    </div>
                {% empty %}
                    <p>HenÃ¼z yorum yapmadÄ±nÄ±z.</p>
                {% endfor %}
            </div>
        </div>
    </div>



<!-- Modal -->
<div class="modal fade" id="updateProfileModal" tabindex="-1" aria-labelledby="updateProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="updateProfileModalLabel">Bilgilerinizi GÃ¼ncelleyin</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form method="POST" enctype="multipart/form-data" action="#">
          {% csrf_token %}
          <div class="modal-body">
            <!-- Ä°sim Soyisim -->
            <div class="mb-3">
              <label for="full_name" class="form-label">Ä°sim Soyisim</label>
              <input type="text" class="form-control" id="full_name" name="full_name" value="{{ request.user.full_name }}">
            </div>
  
            <!-- Profil FotoÄŸrafÄ± -->
            <div class="mb-3">
              <label for="profile_pic" class="form-label">Profil FotoÄŸrafÄ±</label>
              <input type="file" class="form-control" id="profile_pic" name="profile_pic">
            </div>
  
            <!-- KullanÄ±cÄ± AdÄ± -->
            <div class="mb-3">
              <label for="username" class="form-label">KullanÄ±cÄ± AdÄ±</label>
              <input type="text" class="form-control" id="username" name="username" value="{{ request.user.username }}">
            </div>
  
            <!-- E-posta -->
            <div class="mb-3">
              <label for="email" class="form-label">E-posta</label>
              <input type="email" class="form-control" id="email" name="email" value="{{ request.user.email }}">
            </div>
  
            <!-- DoÄŸum Tarihi -->
            <div class="mb-3">
              <label for="birthdate" class="form-label">DoÄŸum Tarihi</label>
              <input type="date" class="form-control" id="birthdate" name="birthdate" value="{{ request.user.birthdate|date:'Y-m-d' }}">
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">GÃ¼ncellemeyi Kaydet</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  


      


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function openModal() {
            document.getElementById("updateModal").style.display = "block";
        }
        
        function closeModal() {
            document.getElementById("updateModal").style.display = "none";
        }
        
        window.onclick = function(event) {
            const modal = document.getElementById("updateModal");
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
       </script>
        
      
</body>
</html>