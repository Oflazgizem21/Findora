{% load static %}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <title>Kaybettim</title>
    <link rel="stylesheet" href="{% static 'css/buldum.css' %}">
</head>
<body>
    
    <div class="container">
        <a href="javascript:history.back()" class="back-button">
            <i class="fas fa-chevron-left"></i>
        </a>
        <div class="floating-items">
            <div class="floating-item"><i class="fas fa-key"></i></div>
            <div class="floating-item"><i class="fas fa-wallet"></i></div>
            <div class="floating-item"><i class="fas fa-mobile-alt"></i></div>
        </div>
        
        <h1 class="animate__animated animate__fadeInDown">Buldum</h1>
        
        <form method="post" enctype="multipart/form-data" class="form">
            {% csrf_token %}
          
            <!-- Eşya Tanımı -->
            <div class="form-group">
                <label for="id_description"><i class="fas fa-pencil-alt"></i> Eşya Tanımı:</label>
                {{ form.tanim }}
            </div>
          
            <!-- Eşya Türü Kısmı -->
            <div class="form-group">
                <label for="id_tur"><i class="fas fa-tag"></i> Eşya Türü:</label>
                <select id="id_tur" name="tur" class="form-select" onchange="toggleCustomInput('tur')">
                    <option value="" selected disabled>Seçiniz...</option>
                    {% for value, label in form.tur.field.choices %}
                        <option value="{{ value }}">{{ label }}</option>
                    {% endfor %}
                </select>
                <div id="custom_tur_box" style="display:none; margin-top: 10px;">
                    <input type="text" id="id_custom_tur" name="custom_tur" class="form-input" placeholder="Örnek: Kemer, Gözlük...">
                </div>
            </div>

            <!-- Eşya Rengi Kısmı -->
            <div class="form-group">
                <label for="id_renk"><i class="fas fa-palette"></i> Eşya Rengi:</label>
                <select id="id_renk" name="renk" class="form-select" onchange="toggleCustomInput('renk')">
                    <option value="" selected disabled>Seçiniz...</option>
                    {% for value, label in form.renk.field.choices %}
                        <option value="{{ value }}">{{ label }}</option>
                    {% endfor %}
                </select>
                <div id="custom_renk_box" style="display:none; margin-top: 10px;">
                    <input type="text" id="id_custom_renk" name="custom_renk" class="form-input" placeholder="Örnek: Kahverengi, Aslanağzı...">
                </div>
            </div>           

            <!-- Konum -->
            <div class="form-group">
                <label for="id_location"><i class="fas fa-map-marker-alt"></i> Konum:</label>
                {{ form.konum }}
            </div>
          
            
           <!-- Eşya Resmi -->
            <div class="form-group file-input-container">
                <label for="id_resim" class="custom-file-label">
                 <i class="fas fa-file-arrow-down"></i> Dosya Seç
                 </label>
                {{ form.resim }}
                <span>Bulduğunuz eşyanın resmini buraya yükleyiniz..</span>
                <div id="previewContainer" style="display: none; text-align: center;">
                 <img id="previewImage" style="margin: 1rem auto 0 auto; display: block; max-width: 150px; border-radius: 8px;" />
                 </div>
            </div>
            
          
            <button type="submit" class="btn animate__animated animate__pulse animate__infinite animate__slower">
                <i class="fas fa-save"></i> Kaydet
            </button>
        </form>
    </div>

    <script>
    // "Diğer" seçilince textbox göster
    function toggleCustomInput(field) {
        const select = document.getElementById(`id_${field}`);
        const customBox = document.getElementById(`custom_${field}_box`);
        
        if (select.value === 'diger') {
            customBox.style.display = 'block';
            customBox.querySelector('input').focus();
            customBox.classList.add('animate__animated', 'animate__fadeIn');
        } else {
            customBox.style.display = 'none';
        }
    }

    // Sayfa yüklendiğinde kontrol et (form geri döndüyse)
    document.addEventListener('DOMContentLoaded', function() {
        toggleCustomInput('tur');
        toggleCustomInput('renk');
        
        // Add animation to form elements on focus
        const inputs = document.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('animate__animated', 'animate__pulse');
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.classList.remove('animate__animated', 'animate__pulse');
            });
        });
        
        // File input styling
        const fileInput = document.querySelector('input[type="file"]');
        if (fileInput) {
            fileInput.addEventListener('change', function() {
                const fileName = this.files[0]?.name || 'Dosya seçilmedi';
                const label = this.previousElementSibling;
                label.innerHTML = `<i class="fas fa-check-circle"></i> ${label.textContent}`;
                label.style.color = '#20c997';
                
                // Add check animation
                label.classList.add('animate__animated', 'animate__bounceIn');
                setTimeout(() => {
                    label.classList.remove('animate__animated', 'animate__bounceIn');
                }, 1000);
            });
        }
    });

    // Görsel önizleme eklentisi
   
    document.addEventListener('DOMContentLoaded', function() {
        const fileInput = document.querySelector('input[type="file"]');
        const fileLabel = document.querySelector('.custom-file-label');
        
        if (fileInput) {
            fileInput.addEventListener('change', function() {
                // Eğer dosya seçildiyse, yazıyı güncelle
                if (this.files.length > 0) {
                    const fileName = this.files[0].name;
                    fileLabel.innerHTML = `<i class="fas fa-check-circle"></i> ${fileName}`;
                    fileLabel.style.color = '#20c997'; // Yeşil renk
                    fileLabel.classList.add('animate__animated', 'animate__bounceIn');
                    
                    setTimeout(() => {
                        fileLabel.classList.remove('animate__animated', 'animate__bounceIn');
                    }, 1000);
                } else {
                    fileLabel.innerHTML = `<i class="fas fa-file-arrow-down"></i> Dosya Seç`; // Yeniden eski yazıyı göster
                    fileLabel.style.color = ''; // Varsayılan renk
                }
            });
        }
    });
   

    </script>
</body>
</html>